# CMPE 172 - Lab #4 Notes



## **Securing a Web Application**

![img.png](./images/img.png)

### **Run the application**

- Once the application starts up, point your browser to http://localhost:8080
![img_1.png](./images/img_1.png)

- If you click on the link, it will try to direct you to the greeting page located at /hello. However, as that particular page is protected and you haven't yet authenticated yourself by logging in, it will redirect you to the login page instead

- At the login page, sign in as the test user by entering user and password for the username and password fields,
![img_2.png](./images/img_2.png)
![img_3.png](./images/img_3.png)

## **Spring Gumball (Version 2)**

![img_4.png](./images/img_4.png)

- Remove Session ID. Change to show HMAC Hash Instead
![img_5.png](./images/img_5.png)

- Deployment of Spring Gumball (Version 2) to Docker
![img_6.png](./images/img_6.png)
  
- Deployment Details (4 Containers)
![img_7.png](./images/img_7.png)

![img_8.png](./images/img_8.png)
- On HA Proxy Load Balancer
![img_9.png](./images/img_9.png)

Question:
1. Do you see any errors that were observed in Spring Gumball (Version 1)? Why or Why Not?
- Version 1 needs to remove HTTP session because relying on the hidden value of state is not secure when accessing back to the browser. To improve security, the HTTP session will be removed and replaced with a HMAC hash generated by hashing a string that includes the timestamp, state, and key hash.

### **Replay Attack** 

**Before**
![img_10.png](./images/img_10.png)
**After**

We use Tamper Dev to interrupt the Post and change "NoQuaterState" to "HasQuaterState"
![img_11.png](./images/img_11.png)